var express = require('express');
var app = express();
var morgan = require('morgan');
var bodyparser = require('body-parser');
var hostname = 'localhost';
var port = 3000;
app.use(morgan('dev'));

var dishrouter=express.Router();
dishrouter.use(bodyparser.json());

dishrouter.route('/')

.all(function (req,res,next) {
	// body...
	res.writeHead(200,{'Content-Type':'text/html'});
	next();
})

.get(function (req,res,next) {
	// body...
	res.end('<h1>Will send u dishes</h1>');
})

.post(function (req,res,next) {
	// body...
	res.end('<h1>Will add dish '+req.body.name+' to the collection</h1>');
})

.delete(function (req,res,next) {
	// body...
	res.end('<h1>Will delete all dishes</h1>');
});

dishrouter.route('/:dishid')

.all(function (req,res,next) {
	// body...
	res.writeHead(200,{'Content-Type':'text/html'});
	next();
})

.put(function (req,res,next) {
	// body...
	res.end('<h1>U have to change description of '+req.params.dishid+'</h1>'+	
		'<h2>Description of '+req.body.name+' is changeed to '+req.body.description+'</h2>');
})

.get(function (req,res,next) {
	// body...
	res.end('<h1>Will give u details of dish '+req.params.dishid+'</h1>');
})

.delete(function (req,res,next) {
	// body...
	res.end('<h1>Will delete dish of id '+req.params.dishid+'</h1>');
});

app.use('/dishes',dishrouter);

app.use(express.static(__dirname+'/public'));

app.listen(port,hostname,function () {
	// body...
	console.log('server running');
});